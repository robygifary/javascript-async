<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajax send JSON</title>
  </head>
  <body>
    <form>
      <label for="username"
        >Username:
        <input type="text" id="username" name="username" />
      </label>
      <br />
      <label for="password"
        >Password:
        <input type="password" id="password" name="password" />
      </label>
      <br />
      <input type="button" id="login" value="Login" />
    </form>
    <h1 id="response"></h1>

    <script>
      /*Saat kita menggunakan AJAX, biasanya bukan hanya untuk mengambil data dari Server
      Kadang kita juga ingin mengirim data dari Client ke Server, misalnya kita membaca semua data di Web Form, lalu mengirimkan ke Server menggunakan AJAX
      Untuk melakukan ini, kita bisa menambahkan parameter data yang akan kita kirim pada method send() milik XMLHttpRequest */

      function doLogin() {
        const ajax = new XMLHttpRequest();
        ajax.open('POST', 'https://testajax.free.beeceptor.com');
        ajax.onload = function () {
          const response = document.getElementById('response');
          response.innerText = ajax.responseText;
        };
        ajax.setRequestHeader('Content-Type', 'aplication/json');

        const json = {
          username: document.getElementById('username').value,
          password: document.getElementById('password').value,
        };
        // send(); contohnya seperti ini
        ajax.send(JSON.stringify(json));
      }
      document.getElementById('login').onclick = doLogin;
    </script>
  </body>
</html>
