<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajax Query Send Parameter</title>
  </head>
  <body>
    <form>
      <label for="search"
        >Search:
        <input type="text" id="search" name="search" />
      </label>
      <br />
      <input type="button" id="searchButton" value="Search" />
    </form>
    <h1 id="response"></h1>

    <script>
      /*
      Selain format JSON, kadang saat mengirim data menggunakan AJAX, kita hanya mengirim dalam bentuk Query Parameter
      Pada kasus ini, kita bisa saja mengubah url nya dengan menambahkan Query Parameter, namun ada cara yang lebih mudah, yaitu menggunakan object URLSearchParam
      Kita bisa memanfaatkan object URLSearchParam sebelum membuat URL
 
      */
      function doSearch() {
        const ajax = new XMLHttpRequest();

        const param = new URLSearchParams();
        param.append('search', document.getElementById('search').value);
        param.append('filter', document.getElementById('search').value);

        ajax.open('GET', `https://gifaryroby.free.beeceptor.com?${param.toString()}`);
        ajax.onload = function () {
          const response = document.getElementById('response');
          response.innerText = ajax.responseText;
        };

        ajax.send();
      }

      document.getElementById('searchButton').onclick = doSearch;
    </script>
  </body>
</html>
